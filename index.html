<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="GG MAX - Developer specializing in Python, HTML, CSS, Java & C. Explore my portfolio and tech projects." />
    <meta name="keywords" content="GG MAX, Python, HTML, CSS, Java, C, Developer" />
    <meta name="author" content="GG MAX" />
    <title>GG MAX | Urban Scene Template</title>
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />

    <!-- Preload fonts -->
    <link rel="preload" href="/assets/fonts/robotocode.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="/assets/fonts/poppins.ttf" as="font" type="font/ttf" crossorigin>

    <style>
      /* Reset & Base */
      * { margin: 0; padding: 0; box-sizing: border-box; }
      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      body {
        font-family: 'poppinsfont', sans-serif;
      }
      @font-face {
        font-family: 'poppinsfont';
        src: url(/assets/fonts/poppins.ttf) format('truetype');
        font-weight: 300;
        font-display: swap;
      }

      /* --- Urban Theme: 背景 (background) --- */
      /* ما از گرادیان متحرک همراه با ابر برای آسمان استفاده می‌کنیم */
      @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      body {
        background: linear-gradient(270deg, #708090, #6e7f80, #576b6a); /* سایه‌های ابری */
        background-size: 600% 600%;
        animation: gradientBG 20s ease infinite;
        color: #eee;
        overflow: hidden;
      }
      
      /* --- Canvas styling --- */
      canvas {
        display: block;
      }
      
      /* --- Header (دکمه‌های تغییر حالت و زبان) --- */
      header.top {
        position: relative;
        z-index: 200; /* بالا بودن */
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background: rgba(0, 0, 0, 0.5);
      }
      header.top h1 {
        font-size: 1.5rem;
        color: #ffc107;
      }
      .toggle-buttons {
        display: flex;
        gap: 0.5rem;
      }
      .toggle-buttons button {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 5px;
        background: #6200ea;
        color: #fff;
        cursor: pointer;
        transition: background 0.3s ease;
      }
      .toggle-buttons button:hover {
        background: #3700b3;
      }
      
      /* --- Navigation (به سبک ساده شهری) --- */
      nav {
        position: absolute;
        top: 70px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 1rem;
        z-index: 200;
      }
      .nav-links {
        padding: 0.5rem 1rem;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 5px;
        color: #fff;
        text-decoration: none;
        transition: background 0.3s ease;
      }
      .nav-links:hover {
        background: rgba(255, 255, 255, 0.2);
      }
      
      /* --- City Simulation Canvas Styling --- */
      #cityCanvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 100;
      }

      /* --- Back to Top Button --- */
      #back-to-top {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 0.5rem;
        border: none;
        border-radius: 50%;
        background: #ffc107;
        color: #000;
        cursor: pointer;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s;
        z-index: 200;
      }
      #back-to-top:hover {
        background: #ffeb3b;
        transform: scale(1.1);
      }
    </style>
    
    <!-- GSAP for Animations (Optional for text fade in, etc.) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  </head>
<body data-theme="day" lang="fa">
  <!-- Header Top: Title and Toggle Buttons -->
  <header class="top">
    <h1>GG MAX - Urban Scene</h1>
    <div class="toggle-buttons">
      <button onclick="toggleTheme()">حالت روز/شب</button>
      <button onclick="toggleLanguage()">زبان</button>
    </div>
  </header>
  
  <!-- Navigation -->
  <nav>
    <a class="nav-links" href="#about">درباره من</a>
    <a class="nav-links" href="#projects">پروژه‌ها</a>
    <a class="nav-links" href="#contact">تماس</a>
  </nav>
  
  <!-- Canvas for City Simulation -->
  <canvas id="cityCanvas"></canvas>
  
  <!-- Back to Top Button -->
  <button id="back-to-top" onclick="scrollToTop()">↑</button>
  
  <!-- Main Content (Overlay text, optional) -->
  <div id="content" style="position: relative; z-index: 250; padding-top: 200px; text-align: center;">
    <section id="about" style="margin-bottom: 2rem; color: #fff;">
      <h2 style="font-size: 2rem;">درباره من</h2>
      <p>سلام! من GG MAX هستم. من در زمینه‌ی برنامه‌نویسی به زبان‌های Python، HTML، CSS، Java و C تخصص دارم.</p>
    </section>
    <section id="projects" style="margin-bottom: 2rem; color: #fff;">
      <h2 style="font-size: 2rem;">پروژه‌ها</h2>
      <p>در حال حاضر چندین پروژه جذاب در این حوزه در حال اجراست.</p>
    </section>
    <section id="contact" style="margin-bottom: 2rem; color: #fff;">
      <h2 style="font-size: 2rem;">تماس</h2>
      <p>لطفاً از طریق شبکه‌های اجتماعی با من در ارتباط باشید!</p>
    </section>
  </div>
  
  <script>
    // Theme & Language Toggle
    function toggleTheme() {
      const body = document.body;
      const current = body.getAttribute("data-theme");
      body.setAttribute("data-theme", current === "day" ? "night" : "day");
    }
    function toggleLanguage() {
      const html = document.documentElement;
      const currentLang = html.getAttribute("lang");
      const newLang = currentLang === "fa" ? "en" : "fa";
      html.setAttribute("lang", newLang);
      alert("زبان به " + (newLang === "fa" ? "فارسی" : "انگلیسی") + " تغییر یافت!");
    }
    
    // Canvas Setup
    const canvas = document.getElementById("cityCanvas");
    const ctx = canvas.getContext("2d");
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();
    
    // Objects for city scene:
    let buildings = [];
    let clouds = [];
    let people = [];
    let airplane = null;
    let airplaneTimer = 0;
    
    // Initialize Buildings
    function initBuildings() {
      buildings = [];
      let count = Math.ceil(canvas.width / 50);
      for (let i = 0; i < count; i++) {
        let w = 50 + Math.random() * 50;
        let h = canvas.height * 0.3 + Math.random() * (canvas.height * 0.2);
        buildings.push({ x: i * 60, width: w, height: h });
      }
    }
    initBuildings();
    
    // Initialize Clouds
    function initClouds() {
      clouds = [];
      let count = 5 + Math.floor(Math.random() * 5);
      for (let i = 0; i < count; i++) {
        clouds.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height * 0.3,
          radius: 20 + Math.random() * 30,
          speed: 0.1 + Math.random() * 0.3
        });
      }
    }
    initClouds();
    
    // Initialize People
    function initPeople() {
      people = [];
      let count = 10 + Math.floor(Math.random() * 5);
      for (let i = 0; i < count; i++) {
        people.push({
          x: Math.random() * canvas.width,
          y: canvas.height - (20 + Math.random() * 30),
          speed: 0.5 + Math.random(),
          talking: Math.random() < 0.3,
          talkTimer: 0
        });
      }
    }
    initPeople();
    
    // Airplane: randomly spawn
    function spawnAirplane() {
      airplane = {
        x: -100,
        y: Math.random() * canvas.height * 0.3,
        speed: 1.5 + Math.random() * 2
      };
    }
    
    // Draw functions:
    function drawBuildings() {
      ctx.fillStyle = "#2c3e50";
      buildings.forEach(b => {
        ctx.fillRect(b.x, canvas.height - b.height, b.width, b.height);
      });
    }
    function drawCloud(cloud) {
      ctx.fillStyle = "rgba(255,255,255,0.8)";
      ctx.beginPath();
      ctx.arc(cloud.x, cloud.y, cloud.radius, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(cloud.x + cloud.radius * 0.6, cloud.y - 10, cloud.radius * 0.8, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(cloud.x - cloud.radius * 0.6, cloud.y - 10, cloud.radius * 0.8, 0, Math.PI * 2);
      ctx.fill();
    }
    function drawClouds() {
      clouds.forEach(cloud => drawCloud(cloud));
    }
    function drawBuildingsAndStreet() {
      drawBuildings();
      // Optional: Draw a street line
      ctx.strokeStyle = "#34495e";
      ctx.beginPath();
      ctx.moveTo(0, canvas.height - 2);
      ctx.lineTo(canvas.width, canvas.height - 2);
      ctx.stroke();
    }
    function drawPeople() {
      people.forEach(p => {
        // Draw person as a circle (head)
        ctx.fillStyle = "#f1c40f";
        ctx.beginPath();
        ctx.arc(p.x, p.y - 10, 8, 0, Math.PI * 2);
        ctx.fill();
        // Draw body (simple line)
        ctx.strokeStyle = "#ecf0f1";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(p.x, p.y - 2);
        ctx.lineTo(p.x, p.y + 10);
        ctx.stroke();
        // Draw speech bubble if talking
        if (p.talking && p.talkTimer > 20) {
          ctx.fillStyle = "rgba(255,255,255,0.8)";
          ctx.beginPath();
          if(ctx.roundRect) {
            ctx.roundRect(p.x + 12, p.y - 40, 50, 20, 10);
          } else {
            ctx.rect(p.x + 12, p.y - 40, 50, 20);
          }
          ctx.fill();
          ctx.fillStyle = "#000";
          ctx.font = "12px Arial";
          ctx.fillText("Salam!", p.x + 15, p.y - 25);
        }
        p.talkTimer++;
        if(p.talkTimer > 120) {
          p.talkTimer = 0;
          p.talking = Math.random() < 0.3;
        }
      });
    }
    function drawAirplane() {
      if(airplane) {
        ctx.fillStyle = "#bdc3c7";
        ctx.beginPath();
        ctx.moveTo(airplane.x, airplane.y);
        ctx.lineTo(airplane.x + 40, airplane.y + 10);
        ctx.lineTo(airplane.x + 30, airplane.y + 20);
        ctx.lineTo(airplane.x, airplane.y + 10);
        ctx.closePath();
        ctx.fill();
      }
    }
    
    // Update functions:
    function update() {
      // Update clouds
      clouds.forEach(c => {
        c.x += c.speed;
        if(c.x - c.radius > canvas.width) {
          c.x = -c.radius;
          c.y = Math.random() * canvas.height * 0.3;
        }
      });
      // Update people
      people.forEach(p => {
        p.x += p.speed;
        if(p.x > canvas.width + 10) p.x = -10;
      });
      // Update airplane:
      if(airplane) {
        airplane.x += airplane.speed;
        if(airplane.x > canvas.width + 100) {
          airplane = null;
          airplaneTimer = 0;
        }
      } else {
        airplaneTimer++;
        if(airplaneTimer > 600 && Math.random() < 0.5) {
          spawnAirplane();
          airplaneTimer = 0;
        }
      }
    }
    
    // Draw scene
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawClouds();
      drawBuildingsAndStreet();
      drawPeople();
      drawAirplane();
    }
    
    // Animation loop
    function animate() {
      update();
      draw();
      requestAnimationFrame(animate);
    }
    animate();
    
    // Back to Top function
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
    
    // Dynamic Back to Top Button (Optional: show/hide based on scroll)
    window.addEventListener("scroll", () => {
      const btn = document.getElementById("back-to-top");
      if (window.scrollY > 300) {
        btn.style.opacity = "1";
        btn.style.visibility = "visible";
      } else {
        btn.style.opacity = "0";
        btn.style.visibility = "hidden";
      }
    });
    
    // Code snippet switching & copy functionality:
    const snippets = [
`<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>نمونه HTML</title>
  </head>
  <body>
    <h1>سلام، دنیا!</h1>
    <p>این یک نمونه کد HTML است.</p>
  </body>
</html>`,
`def greet(name):
    print(f"سلام, {name}!")
if __name__ == '__main__':
    greet("دنیا")`,
`<div class="container">
  <h2>خوش آمدید</h2>
  <p>این یک نمونه کد الهام‌بخش HTML است.</p>
</div>`
    ];
    
    function showRandomSnippet() {
      const pre = document.getElementById("snippet-container");
      const random = snippets[Math.floor(Math.random() * snippets.length)];
      gsap.to(pre, { duration: 0.5, opacity: 0, ease: "power3.in", onComplete: () => {
          pre.textContent = random;
          gsap.to(pre, { duration: 0.5, opacity: 1, ease: "power3.out" });
      }});
    }
    function copySnippet() {
      const pre = document.getElementById("snippet-container");
      navigator.clipboard.writeText(pre.textContent)
        .then(() => alert("کد با موفقیت کپی شد!"))
        .catch(() => alert("مشکلی در کپی کردن کد پیش آمد."));
    }
    showRandomSnippet();
    setInterval(showRandomSnippet, 10000);
  </script>
</body>
</html>
